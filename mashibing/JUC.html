<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多线程与高并发（进程内高并发） | Seven</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="shortcut icon" type="image/x-icon" href="/seven/favicon.ico">
    <meta name="description" content="Seven的笔记">
    <link rel="preload" href="/seven/assets/css/0.styles.7060d2d7.css" as="style"><link rel="preload" href="/seven/assets/js/app.1a4fddcd.js" as="script"><link rel="preload" href="/seven/assets/js/3.c40e6b06.js" as="script"><link rel="preload" href="/seven/assets/js/4.b11f24e4.js" as="script"><link rel="preload" href="/seven/assets/js/20.8785dd7a.js" as="script"><link rel="prefetch" href="/seven/assets/js/1.c1513d50.js"><link rel="prefetch" href="/seven/assets/js/10.e486cde4.js"><link rel="prefetch" href="/seven/assets/js/11.1e0e07ea.js"><link rel="prefetch" href="/seven/assets/js/12.268fe449.js"><link rel="prefetch" href="/seven/assets/js/13.baedc10c.js"><link rel="prefetch" href="/seven/assets/js/14.65cea75b.js"><link rel="prefetch" href="/seven/assets/js/15.a114822c.js"><link rel="prefetch" href="/seven/assets/js/16.54820cbd.js"><link rel="prefetch" href="/seven/assets/js/17.670001a7.js"><link rel="prefetch" href="/seven/assets/js/18.e81d8124.js"><link rel="prefetch" href="/seven/assets/js/19.65d4b235.js"><link rel="prefetch" href="/seven/assets/js/21.172276dd.js"><link rel="prefetch" href="/seven/assets/js/5.e90c7de0.js"><link rel="prefetch" href="/seven/assets/js/6.2c609edc.js"><link rel="prefetch" href="/seven/assets/js/7.5e724937.js"><link rel="prefetch" href="/seven/assets/js/8.36e97811.js"><link rel="prefetch" href="/seven/assets/js/9.6288e1a0.js">
    <link rel="stylesheet" href="/seven/assets/css/0.styles.7060d2d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/seven/" class="home-link router-link-active"><img src="/seven/images/logo.png" alt="Seven" class="logo"> <span class="site-name can-hide">Seven</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/seven/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/seven/summary.html" class="nav-link">
  目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          DevOps
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travis CI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://icyfenix.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  软件架构探索
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pdai.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 全栈知识体系
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://vssue.js.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vssue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/fobgochod/seven" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/seven/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/seven/summary.html" class="nav-link">
  目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          DevOps
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travis CI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://icyfenix.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  软件架构探索
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pdai.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 全栈知识体系
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://vssue.js.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vssue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/fobgochod/seven" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/seven/summary/" class="sidebar-link">目录</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/seven/introduction/about-me.html" class="sidebar-link">关于作者</a></li><li><a href="/seven/introduction/about-the-project.html" class="sidebar-link">记记笔记</a></li><li><a href="/seven/introduction/guide/quick-start.html" class="sidebar-link">如何开始</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/seven/mashibing/" class="sidebar-heading clickable router-link-active open"><span>7月8月</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/seven/mashibing/JUC.html" aria-current="page" class="active sidebar-link">多线程与高并发（进程内高并发）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/seven/mashibing/JUC.html#单机高并发应该掌握的线程基础：线程状态，异常与锁等" class="sidebar-link">单机高并发应该掌握的线程基础：线程状态，异常与锁等</a></li><li class="sidebar-sub-header"><a href="/seven/mashibing/JUC.html#解析自旋锁cas操作与volatile" class="sidebar-link">解析自旋锁CAS操作与volatile</a></li><li class="sidebar-sub-header"><a href="/seven/mashibing/JUC.html#juc包下atomicxxx类与新的同步机制：latch-semaphore等" class="sidebar-link">JUC包下AtomicXXX类与新的同步机制：Latch Semaphore等</a></li><li class="sidebar-sub-header"><a href="/seven/mashibing/JUC.html#locksupport，高频面试题，aqs源码，以及源码阅读方法论" class="sidebar-link">LockSupport，高频面试题，AQS源码，以及源码阅读方法论</a></li><li class="sidebar-sub-header"><a href="/seven/mashibing/JUC.html#强软弱虚四种引用以及threadlocal的原理与源码" class="sidebar-link">强软弱虚四种引用以及ThreadLocal的原理与源码</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DSweet</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>附录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/seven/appendix/markdown.html" class="sidebar-link">Markdown基本语法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="多线程与高并发（进程内高并发）">多线程与高并发（进程内高并发）</h1> <div class="custom-block tip"><p class="custom-block-title">总览</p> <ol><li>单机高并发应该掌握的线程基础：线程状态，异常与锁等 <a href="https://ke.qq.com/webcourse/index.html#cid=398381&amp;term_id=100475149&amp;taid=3385529446306861&amp;type=1024&amp;vid=5285890793201449862" target="_blank" rel="noopener noreferrer">视频41<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>解析自旋锁CAS操作与volatile <a href="https://ke.qq.com/webcourse/index.html#cid=398381&amp;term_id=100475149&amp;taid=3826180205974573&amp;type=1024&amp;vid=5285890793489922415" target="_blank" rel="noopener noreferrer">视频46<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>JUC包下AtomicXXX类与新的同步机制：Latch Semaphore等 <a href="https://ke.qq.com/webcourse/index.html#cid=398381&amp;term_id=100475149&amp;taid=3852263542363181&amp;type=1024&amp;vid=5285890793810836226" target="_blank" rel="noopener noreferrer">视频52<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>LockSupport，高频面试题，AQS源码，以及源码阅读方法论 <a href="https://ke.qq.com/webcourse/index.html#cid=398381&amp;term_id=100475149&amp;taid=3385576690947117&amp;type=1024&amp;vid=5285890794254224450" target="_blank" rel="noopener noreferrer">视频58<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>强软弱虚四种引用以及ThreadLocal的原理与源码 <a href="https://ke.qq.com/webcourse/index.html#cid=398381&amp;term_id=100475149&amp;taid=3385593870816301&amp;type=1024&amp;vid=5285890794418013695" target="_blank" rel="noopener noreferrer">视频62<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>线程池可用的各种高并发容器详解：CopyOnWriteList，BlockingQueue等 <a href="#">视频64</a></li> <li>详解线程池：自定义线程池，JDK自带线程池，ForkJoin，源码解析等(一） <a href="#">视频69</a></li> <li>详解线程池：自定义线程池，JDK自带线程池，ForkJoin，源码解析等(二） <a href="#">视频74</a></li> <li>单机压测工具JMH，单机最快MQ - Disruptor原理解析 <a href="#">视频76</a></li></ol></div> <p class="tip">进度</p> <p></p><div class="table-of-contents"><ul><li><a href="#单机高并发应该掌握的线程基础：线程状态，异常与锁等">单机高并发应该掌握的线程基础：线程状态，异常与锁等</a></li><li><a href="#解析自旋锁cas操作与volatile">解析自旋锁CAS操作与volatile</a></li><li><a href="#juc包下atomicxxx类与新的同步机制：latch-semaphore等">JUC包下AtomicXXX类与新的同步机制：Latch Semaphore等</a></li><li><a href="#locksupport，高频面试题，aqs源码，以及源码阅读方法论">LockSupport，高频面试题，AQS源码，以及源码阅读方法论</a></li><li><a href="#强软弱虚四种引用以及threadlocal的原理与源码">强软弱虚四种引用以及ThreadLocal的原理与源码</a></li></ul></div><p></p> <h2 id="单机高并发应该掌握的线程基础：线程状态，异常与锁等">单机高并发应该掌握的线程基础：线程状态，异常与锁等</h2> <ul><li>线程的概念、启动方式、常用方法</li> <li>synchronized(Object)
<ul><li>不能用String常量、Integer、Long</li> <li>object</li></ul></li> <li>线程同步</li> <li>synchronized
<ul><li>锁的是对象不是代码</li> <li>this *.class</li> <li>锁的方法 非锁定方法 可以同时执行</li> <li>锁升级
<ul><li>无锁 偏向锁 自旋锁 重量级锁</li> <li>执行时间短（加锁代码），线程数少，用自旋</li> <li>执行时间长，线程数多，用系统锁</li></ul></li></ul></li></ul> <h2 id="解析自旋锁cas操作与volatile">解析自旋锁CAS操作与volatile</h2> <ul><li>volatile
<ul><li>保证线程可见性
<ul><li>MESI</li> <li>缓存一致性协议</li></ul></li> <li>禁止指令重排
<ul><li>DCL 单例</li> <li>Double Check Lock</li> <li>loadfence原语指令</li> <li>storefence原语指令</li></ul></li></ul></li></ul> <p>class A {
private a = 1;
}</p> <p>A obj = new A();</p> <ul><li>申请内存，对象内部默认值 此时a=0</li> <li>对象初始化，调用对象初始化方法 此时a=1</li> <li>对象赋值 将内存指向obj</li></ul> <p>第二三步可能发生指令重排</p> <p>CAS(无锁优化 自旋 乐观锁)</p> <ul><li>Compare And Set/Swap</li> <li>cas(V, Expected, NewValue)</li> <li>if V == E
V = New
otherwise try again or fail</li> <li>CPU原语支持
ABA问题(在进行CAS操作时候，另一个线程修改)</li> <li>加version</li> <li>A 1.0</li> <li>B 2.0</li> <li>A 3.0</li> <li>cas(version)</li> <li>如果基础类型 无所谓</li> <li>如果引用类型</li></ul> <p>Unsafe(jdk1.8) = c c++的指针</p> <ul><li>直接操作内存
<ul><li>allocateMemory putXX freeMemory pageSize</li></ul></li> <li>直接生成类实例
<ul><li>allocateInstance</li></ul></li> <li>直接操作类或者实例变量
<ul><li>objectFieldOffset getInt getObject</li></ul></li> <li>CAS相关操作
<ul><li>compareAndSwapObject Int Long</li></ul></li> <li>c -&gt; malloc free</li> <li>c++ -&gt; new delete</li></ul> <h2 id="juc包下atomicxxx类与新的同步机制：latch-semaphore等">JUC包下AtomicXXX类与新的同步机制：Latch Semaphore等</h2> <p>ReentrantLock vs synchronized</p> <ul><li><p>cas vs sync</p></li> <li><p>tryLock</p></li> <li><p>lockInterruptibly</p></li> <li><p>公平和非公平</p></li> <li><p>CountDownLatch</p></li> <li><p>CyclicBarrier</p></li> <li><p>Phaser</p></li> <li><p>ReadWriteLock</p> <ul><li>共享锁</li> <li>排他锁</li></ul></li> <li><p>Semaphore</p> <ul><li>限流</li> <li>车道 收费站</li></ul></li></ul> <h2 id="locksupport，高频面试题，aqs源码，以及源码阅读方法论">LockSupport，高频面试题，AQS源码，以及源码阅读方法论</h2> <ul><li><p>TestLockSupport</p></li> <li><p>淘宝面试题</p> <ul><li>实现一个容器，提供两个方法，add, size</li> <li>写2个线程，线程1添加10个元素到容器中，线程2实现监控元素的个数，当个数到5个时，线程2会给出提示并结束</li> <li>面试题：写一个固定容量的同步器，拥有put和get方法，以及getCount方法，能够支持2个生产者线程以及10个消费者线程的阻塞调用</li></ul></li> <li><p>源码阅读技巧</p></li> <li><p>AQS源码解析</p></li></ul> <h2 id="强软弱虚四种引用以及threadlocal的原理与源码">强软弱虚四种引用以及ThreadLocal的原理与源码</h2> <ul><li>AQS源码
<ul><li>VarHandle 1、普通属性也能进行原子操作 2、比反射快，直接操纵二进制码</li></ul></li> <li>强软弱虚
<ul><li>强 - 普通引用 Object obj = new Object()</li> <li>软 - 内存不够才回收</li> <li>弱 - 遇到gc就回收 应用 ThreadLocal</li> <li>虚 -</li></ul></li> <li>ThreadLocal</li></ul> <p>Memory Leak - 内存泄漏
OOM((Out Of Memory)-内存溢出</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fobgochod/seven/edit/master/mashibing/JUC.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">总字数:</span> <span class="words">1,033</span> <span class="prefix">字　</span> <span class="prefix">上次更新:</span> <span class="time">2020-07-13 00:15:23</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
    ←
    <a href="/seven/mashibing/" class="prev router-link-active">
      7月8月
    </a></span> <span class="next"><a href="/seven/appendix/markdown.html">
      Markdown基本语法
    </a>
    →
  </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/seven/assets/js/app.1a4fddcd.js" defer></script><script src="/seven/assets/js/3.c40e6b06.js" defer></script><script src="/seven/assets/js/4.b11f24e4.js" defer></script><script src="/seven/assets/js/20.8785dd7a.js" defer></script>
  </body>
</html>
