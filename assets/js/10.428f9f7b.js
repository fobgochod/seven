(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{567:function(s,t,a){s.exports=a.p+"assets/img/join1.3a688035.png"},568:function(s,t,a){s.exports=a.p+"assets/img/join2.75b92354.png"},569:function(s,t,a){s.exports=a.p+"assets/img/join3.752400d8.png"},614:function(s,t,a){"use strict";a.r(t);var r=a(12),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"mysql调优-mysql索引优化实现细节"}},[s._v("mysql调优--mysql索引优化实现细节")]),s._v(" "),r("h2",{attrs:{id:"优化小细节"}},[s._v("优化小细节")]),s._v(" "),r("h4",{attrs:{id:"cardinality、"}},[s._v("Cardinality、")]),s._v(" "),r("ul",[r("li",[s._v("基数")]),s._v(" "),r("li",[s._v("评估索引是否合理")]),s._v(" "),r("li",[s._v("估计索引中不重复记录，如果这个相对值很小，可能就要评估索引是否有意义")])]),s._v(" "),r("h4",{attrs:{id:"hyperloglog"}},[s._v("HyperLogLog")]),s._v(" "),r("ul",[r("li",[s._v("算法")]),s._v(" "),r("li",[s._v("统计某一字段的Distinct Value")])]),s._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[s._v("基数")]),s._v(" "),r("p",[s._v("基数就是指一个集合中不同值的数目，比如[a,b,c,d]的基数就是4，[a,b,c,d,a]的基数还是4，因为a重复了一个，不算。"),r("br"),s._v("\n基数也可以称之为Distinct Value，简称DV。HyperLogLog算法就是用来计算基数的。"),r("br"),s._v(" "),r("strong",[s._v("基数估计")]),s._v("就是在误差可接受的范围内，快速计算基数。")])]),s._v(" "),r("h4",{attrs:{id:"_1、当使用索引列进行查询的时候尽量不要使用表达式，把计算放到业务层而不是数据库层"}},[s._v("1、当使用索引列进行查询的时候尽量不要使用表达式，把计算放到业务层而不是数据库层")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("h4",{attrs:{id:"_2、尽量使用主键查询，而不是其他索引，因此主键查询不会触发回表查询"}},[s._v("2、尽量使用主键查询，而不是其他索引，因此主键查询不会触发回表查询")]),s._v(" "),r("h4",{attrs:{id:"_3、使用前缀索引"}},[s._v("3、使用前缀索引")]),s._v(" "),r("ul",[r("li",[s._v("有时候需要索引很长的字符串，这会让索引变的大且慢，通常情况下可以使用某个列开始的部分字符串，这样大大的节约索引空间，从而提高索引效率，但这会降低索引的选择性，索引的选择性是指不重复的索引值和数据表记录总数的比值，范围从1/#T到1之间。索引的选择性越高则查询效率越高，因为选择性更高的索引可以让mysql在查找的时候过滤掉更多的行。")]),s._v(" "),r("li",[s._v("一般情况下某个列前缀的选择性也是足够高的，足以满足查询的性能，但是对应BLOB,TEXT,VARCHAR类型的列，必须要使用前缀索引，因为mysql不允许索引这些列的完整长度，使用该方法的诀窍在于要选择足够长的前缀以保证较高的选择性，通过又不能太长。")]),s._v(" "),r("li",[s._v("案例演示：")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--创建数据表")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" citydemo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" citydemo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--重复执行5次下面的sql语句")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" citydemo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" citydemo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--更新城市表的名称")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" citydemo "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" city"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rand"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--查找最常见的城市列表，发现每个值都出现45-65次，")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cnt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" citydemo "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" city "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" cnt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--查找最频繁出现的城市前缀，先从3个前缀字母开始，发现比原来出现的次数更多，可以分别截取多个字符查看城市出现的次数")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cnt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pref "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" citydemo "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" pref "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" cnt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cnt"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pref "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" citydemo "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" pref "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" cnt "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--此时前缀的选择性接近于完整列的选择性")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--还可以通过另外一种方式来计算完整列的选择性，可以看到当前缀长度到达7之后，再增加前缀长度，选择性提升的幅度已经很小了")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel3"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel4"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel5"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel6"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel7"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("left")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" sel8 \n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" citydemo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--计算完成之后可以创建前缀索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" citydemo "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("city"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--注意：前缀索引是一种能使索引更小更快的有效方法，但是也包含缺点：mysql无法使用前缀索引做order by 和 group by。 ")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br")])]),r("h4",{attrs:{id:"_4、使用索引扫描来排序"}},[s._v("4、使用索引扫描来排序")]),s._v(" "),r("ol",[r("li",[s._v("Mysql有两种方式可以生成有序的结果：通过排序操作或者按索引顺序扫描，如果explain出来的type列的值为index,则说明mysql使用了索引扫描来做排序")])]),s._v(" "),r("p",[s._v("​2. 扫描索引本身是很快的，因为只需要从一条索引记录移动到紧接着的下一条记录。但如果索引不能覆盖查询所需的全部列，那么就不得不每扫描一条索引记录就得回表查询一次对应的行，这基本都是随机IO，因此按索引顺序读取数据的速度通常要比顺序地全表扫描慢")]),s._v(" "),r("ol",{attrs:{start:"3"}},[r("li",[s._v("Mysql可以使用同一个索引即满足排序，又用于查找行，如果可能的话，设计索引时应该尽可能地同时满足这两种任务。")])]),s._v(" "),r("p",[s._v("​4. 只有当索引的列顺序和order by子句的顺序完全一致，并且所有列的排序方式都一样时，mysql才能够使用索引来对结果进行排序，如果查询需要关联多张表，则只有当orderby子句引用的字段全部为第一张表时，才能使用索引做排序。order by子句和查找型查询的限制是一样的，需要满足索引的最左前缀的要求，否则，mysql都需要执行顺序操作，而无法利用索引排序")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--sakila数据库中rental表在rental_date,inventory_id,customer_id上有rental_date的索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--使用rental_date索引为下面的查询做排序")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rental_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rental "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2005-05-25'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" inventory_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("customer_id\\G\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": rental\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": ref\npossible_keys: rental_date\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": rental_date\n      key_len: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n          ref: const\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" condition\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--order by子句不满足索引的最左前缀的要求，也可以用于查询排序，这是因为所以你的第一列被指定为一个常数")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--该查询为索引的第一列提供了常量条件，而使用第二列进行排序，将两个列组合在一起，就形成了索引的最左前缀")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rental_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rental "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2005-05-25'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" inventory_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\\G\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": rental\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": ref\npossible_keys: rental_date\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": rental_date\n      key_len: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n          ref: const\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--下面的查询不会利用索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rental_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rental "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2005-05-25'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("inventory_id\\G\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": rental\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\npossible_keys: rental_date\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n      key_len: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n          ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16005")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--该查询使用了两中不同的排序方向，但是索引列都是正序排序的")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rental_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rental "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2005-05-25'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" inventory_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("customer_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),s._v("\\G\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": rental\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\npossible_keys: rental_date\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n      key_len: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n          ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16005")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--该查询中引用了一个不再索引中的列")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" rental_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rental "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rental_date"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2005-05-25'")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" inventory_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("staff_id\\G\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n           id: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  select_type: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("\n        "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(": rental\n   partitions: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\npossible_keys: rental_date\n          "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n      key_len: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n          ref: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n         "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(": "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16005")]),s._v("\n     filtered: "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("50.00")]),s._v("\n        Extra: "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br"),r("span",{staticClass:"line-number"},[s._v("38")]),r("br"),r("span",{staticClass:"line-number"},[s._v("39")]),r("br"),r("span",{staticClass:"line-number"},[s._v("40")]),r("br"),r("span",{staticClass:"line-number"},[s._v("41")]),r("br"),r("span",{staticClass:"line-number"},[s._v("42")]),r("br"),r("span",{staticClass:"line-number"},[s._v("43")]),r("br"),r("span",{staticClass:"line-number"},[s._v("44")]),r("br"),r("span",{staticClass:"line-number"},[s._v("45")]),r("br"),r("span",{staticClass:"line-number"},[s._v("46")]),r("br"),r("span",{staticClass:"line-number"},[s._v("47")]),r("br"),r("span",{staticClass:"line-number"},[s._v("48")]),r("br"),r("span",{staticClass:"line-number"},[s._v("49")]),r("br"),r("span",{staticClass:"line-number"},[s._v("50")]),r("br"),r("span",{staticClass:"line-number"},[s._v("51")]),r("br"),r("span",{staticClass:"line-number"},[s._v("52")]),r("br"),r("span",{staticClass:"line-number"},[s._v("53")]),r("br"),r("span",{staticClass:"line-number"},[s._v("54")]),r("br"),r("span",{staticClass:"line-number"},[s._v("55")]),r("br"),r("span",{staticClass:"line-number"},[s._v("56")]),r("br"),r("span",{staticClass:"line-number"},[s._v("57")]),r("br"),r("span",{staticClass:"line-number"},[s._v("58")]),r("br"),r("span",{staticClass:"line-number"},[s._v("59")]),r("br"),r("span",{staticClass:"line-number"},[s._v("60")]),r("br"),r("span",{staticClass:"line-number"},[s._v("61")]),r("br"),r("span",{staticClass:"line-number"},[s._v("62")]),r("br"),r("span",{staticClass:"line-number"},[s._v("63")]),r("br"),r("span",{staticClass:"line-number"},[s._v("64")]),r("br"),r("span",{staticClass:"line-number"},[s._v("65")]),r("br"),r("span",{staticClass:"line-number"},[s._v("66")]),r("br"),r("span",{staticClass:"line-number"},[s._v("67")]),r("br"),r("span",{staticClass:"line-number"},[s._v("68")]),r("br"),r("span",{staticClass:"line-number"},[s._v("69")]),r("br"),r("span",{staticClass:"line-number"},[s._v("70")]),r("br"),r("span",{staticClass:"line-number"},[s._v("71")]),r("br"),r("span",{staticClass:"line-number"},[s._v("72")]),r("br"),r("span",{staticClass:"line-number"},[s._v("73")]),r("br"),r("span",{staticClass:"line-number"},[s._v("74")]),r("br"),r("span",{staticClass:"line-number"},[s._v("75")]),r("br"),r("span",{staticClass:"line-number"},[s._v("76")]),r("br"),r("span",{staticClass:"line-number"},[s._v("77")]),r("br"),r("span",{staticClass:"line-number"},[s._v("78")]),r("br"),r("span",{staticClass:"line-number"},[s._v("79")]),r("br"),r("span",{staticClass:"line-number"},[s._v("80")]),r("br"),r("span",{staticClass:"line-number"},[s._v("81")]),r("br"),r("span",{staticClass:"line-number"},[s._v("82")]),r("br"),r("span",{staticClass:"line-number"},[s._v("83")]),r("br"),r("span",{staticClass:"line-number"},[s._v("84")]),r("br"),r("span",{staticClass:"line-number"},[s._v("85")]),r("br")])]),r("h4",{attrs:{id:"_5、union-all-in-or都能够使用索引，但是推荐使用in"}},[s._v("5、union all,in,or都能够使用索引，但是推荐使用in")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" actor "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" actor_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("h4",{attrs:{id:"_6、范围列可以用到索引"}},[s._v("6、范围列可以用到索引")]),s._v(" "),r("ul",[r("li",[s._v("范围条件是：<、<=、>、>=、between")]),s._v(" "),r("li",[s._v("范围列可以用到索引，但是范围列后面的列无法用到索引，索引最多用于一个范围列")])]),s._v(" "),r("h4",{attrs:{id:"_7、强制类型转换会全表扫描"}},[s._v("7、强制类型转换会全表扫描")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("phone "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("phone"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不会触发索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" phone"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13800001234")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 触发索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" phone"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'13800001234'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("h4",{attrs:{id:"_8、更新十分频繁，数据区分度不高的字段上不宜建立索引"}},[s._v("8、更新十分频繁，数据区分度不高的字段上不宜建立索引")]),s._v(" "),r("ul",[r("li",[s._v("更新会变更B+树，更新频繁的字段建议索引会大大降低数据库性能")]),s._v(" "),r("li",[s._v("类似于性别这类区分不大的属性，建立索引是没有意义的，不能有效的过滤数据，")]),s._v(" "),r("li",[s._v("一般区分度在80%以上的时候就可以建立索引，区分度可以使用 count(distinct(列名))/count(*) 来计算")])]),s._v(" "),r("h4",{attrs:{id:"_9、创建索引的列，不允许为null，可能会得到不符合预期的结果"}},[s._v("9、创建索引的列，不允许为null，可能会得到不符合预期的结果")]),s._v(" "),r("h4",{attrs:{id:"_10、当需要进行表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致"}},[s._v("10、当需要进行表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致")]),s._v(" "),r("ul",[r("li",[s._v("Simple Nested-Loop Join\n"),r("img",{attrs:{src:a(567),alt:""}})]),s._v(" "),r("li",[s._v("Index Nested-Loop Join\n"),r("img",{attrs:{src:a(568),alt:""}})]),s._v(" "),r("li",[s._v("Block Nested-Loop Join\n"),r("img",{attrs:{src:a(569),alt:""}})])]),s._v(" "),r("h4",{attrs:{id:"_11、能使用limit的时候尽量使用limit"}},[s._v("11、能使用limit的时候尽量使用limit")]),s._v(" "),r("h4",{attrs:{id:"_12、单表索引建议控制在5个以内"}},[s._v("12、单表索引建议控制在5个以内")]),s._v(" "),r("h4",{attrs:{id:"_13、单索引字段数不允许超过5个（组合索引）"}},[s._v("13、单索引字段数不允许超过5个（组合索引）")]),s._v(" "),r("h4",{attrs:{id:"_14、创建索引的时候应该避免以下错误概念"}},[s._v("14、创建索引的时候应该避免以下错误概念")]),s._v(" "),r("ul",[r("li",[s._v("索引越多越好")]),s._v(" "),r("li",[s._v("过早优化，在不了解系统的情况下进行优化")])]),s._v(" "),r("h2",{attrs:{id:"索引监控"}},[s._v("索引监控")]),s._v(" "),r("ul",[r("li",[s._v("show status like 'Handler_read%';")]),s._v(" "),r("li",[s._v("参数解释\n"),r("ul",[r("li",[s._v("Handler_read_first：读取索引第一个条目的次数")]),s._v(" "),r("li",[s._v("Handler_read_key：通过index获取数据的次数")]),s._v(" "),r("li",[s._v("Handler_read_last：读取索引最后一个条目的次数")]),s._v(" "),r("li",[s._v("Handler_read_next：通过索引读取下一条数据的次数")]),s._v(" "),r("li",[s._v("Handler_read_prev：通过索引读取上一条数据的次数")]),s._v(" "),r("li",[s._v("Handler_read_rnd：从固定位置读取数据的次数")]),s._v(" "),r("li",[s._v("Handler_read_rnd_next：从数据节点读取下一条数据的次数")])])])]),s._v(" "),r("h2",{attrs:{id:"简单案例"}},[s._v("简单案例")]),s._v(" "),r("blockquote",[r("p",[s._v("预先准备好数据")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" FOREIGN_KEY_CHECKS"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("itdragon_order_list"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("itdragon_order_list"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主键id，默认自增长'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("transaction_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("150")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'交易号'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("gross"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'毛收入(RMB)'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("net"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'净收入(RMB)'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("stock_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'发货仓库'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("order_status"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'订单状态'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("descript"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'客服备注'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("finance_descript"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'财务备注'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("create_type"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建类型'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("order_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'订单级别'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("input_user"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'录入人'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("input_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'录入时间'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10003")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10000'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'81X97310V32236260E'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6.6'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'6.13'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'auto'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'itdragon'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2017-08-28 17:01:49'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10001'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'61525478BB371361Q'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'18.88'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'18.79'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'auto'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'itdragon'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2017-08-18 17:01:50'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10002'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5RT64180WE555861V'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20.18'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20.17'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ok'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'auto'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'itdragon'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2017-09-08 17:01:49'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br")])]),r("p",[s._v("逐步开始进行优化：")]),s._v(" "),r("blockquote",[r("p",[s._v("第一个案例：")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" transaction_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"81X97310V32236260E"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--通过查看执行计划发现type=all,需要进行全表扫描")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" transaction_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"81X97310V32236260E"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--优化一、为transaction_id创建唯一索引")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_order_transaID "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("transaction_id"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--当创建索引之后，唯一索引对应的type是const，通过索引一次就可以找到结果，普通索引对应的type是ref，表示非唯一性索引赛秒，找到值还要进行扫描，直到将索引文件扫描完为止，显而易见，const的性能要高于ref")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" transaction_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"81X97310V32236260E"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n "),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--优化二、使用覆盖索引，查询的结果变成 transaction_id,当extra出现using index,表示使用了覆盖索引")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" transaction_id "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" transaction_id "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"81X97310V32236260E"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br")])]),r("blockquote",[r("p",[s._v("第二个案例")])]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--创建复合索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_order_levelDate "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("order_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("input_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--创建索引之后发现跟没有创建索引一样，都是全表扫描，都是文件排序")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" order_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("input_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--可以使用force index强制指定索引")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("force")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("idx_order_levelDate"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" order_level"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("input_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--其实给订单排序意义不大，给订单级别添加索引意义也不大，因此可以先确定order_level的值，然后再给input_date排序")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("explain")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itdragon_order_list "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" order_level"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" input_date"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);